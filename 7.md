# 7. 网络服务 {#7}

如果用户的云主机有访问外网的需求，可以通过三种方式实现：

1. 云主机关联浮动IP，关联浮动IP的云主机可从外部被访问到。
2. 云主机所在子网关联路由器，因为路由器在创建时分配的IP就是浮动IP。
3. 通过端口转发功能，创建虚机端口与路由端口的端口转发规则。

权限说明

待补充

## 7.1 外部网络管理 {#7-1}

待补充

## 7.2 网络管理 {#7-2}

### 7.2.1 功能说明 {#7-2-1}

用户可创建多个网络，在每个网络内，可创建多个子网，处于同一个子网内的主机可以相互通信，子网之间是完全隔离的。如果两个子网之间需要通信，需要将两个子网关联到同一个路由器。

### 7.2.2 网络列表 {#7-2-2}

点击左侧导航栏“网络->网络管理”，进入网络管理页面，即可查看当前网络列表，列表所含字段具体如下：

* 名称：网络的名字，由用户创建网络时填写。
* 状态：该字段显示当前网络是否正常可用。
* 网络类型：vlan、flat等。
* 物理网络：网络所关联的物理网络。
* 分段标识：一个整数数字，在创建网络完成时由系统随机分配。
* 项目：网络所属的租户名称。

在网络列表中，用户可通过输入网络名称、分段标识和物理机网络的名称进行精确查询，也可按照网络分区和项目名称进行筛选。

### 7.2.3 网络相关操作 {#7-2-3}

针对网络的操作包括：创建网络、编辑网络、删除网络。

| 操作 | 前提条件 | 描述 |
| :--- | | :--- | | :--- |
| 创建网络 | 当前项目下已经创建至少一个路由 | 点击右上角“创建网络”按钮，在弹窗中输入网络名称，选择网络区域，填写子网名称、网络地址、网关IP，然后选择一个匹配的路由，最后点击“确定”按钮。 |
| 编辑网络 | -- | 选中一个网络，点击右上角“更多操作->编辑网络”，可在弹出框中更改网络名称。 |
| 删除网络 | 网络下没有子网 | 选中一个网络，若它包含的子网数为零，点击右上角“更多操作->删除网络”。 |

创建网络弹窗：

![](/assets/创建网络弹窗.png)

### 7.2.4 子网列表 {#7-2-4}

点击具体网络的名称，将打开该网络下的子网列表。其中，各字段含义如下：

* 名称：子网的名字，在创建子网时由用户填写。
* 网络地址：显示子网所在网段。
* IP版本：IPV4。
* 网关IP：网关IP为创建子网时指定。
* 关联路由：子网所关联的路由。

### 7.2.5 子网相关操作 {#7-2-5}

针对子网的操作包括：创建子网、编辑子网、删除子网。

| 操作 | 前提条件 | 描述 |
| :--- | | :--- | | :--- |
| 创建子网 | 当前项目下已经创建至少一个路由 | 点击右上角“创建网络”按钮，在弹窗中输入子网名称、网络地址、网关IP，然后选择一个匹配的路由，最后点击“确定”按钮。 |
| 编辑子网 | -- | 选中一个子网，点击右上角“更多操作->编辑子网”，可在弹出框中更改子网名称。 |
| 删除子网 | a. 该子网没有关联任何路由</br>b. 该子网的IP没有分配到任何云主机上| 选中一个子网，若它没有关联任何资源，点击右上角“更多操作->删除子网”，在弹出框中点击“删除”即可。 |

## 7.3 路由管理 {#7-3}

### 7.3.1 功能说明 {#7-3-1}

路由主要有两个作用：

1. 作为外网与用户私有网络之间的通道：比如开启外网关并绑定外网IP之后，便可以通过VPN或端口转发功能从外部访问云内部网络资源。
2. 作为用户多个子网之间路由功能。

### 7.3.2 路由管理 {#7-3-2}

登录控制台，点击左侧导航栏“网络->路由管理”，即可查看路由列表。其中，各个字段的含义如下：

* 名称：路由器的名字，由用户创建时填写。
* 状态：表示该路由当前是否正常可用。
* 带宽：表示当前路由的带宽，单位为Mbps。
* 外部网关：创建路由时选择的外部网络，默认为external。
* 外部IP：创建路由时自动分配。
* 类型：ha/活动/占用，表示不同的路由类型。
* 标识：uuid，路由唯一标识符。

### 7.3.2 路由相关操作 {#7-3-2}

针对路由的操作包括：创建路由、编辑路由、修改带宽、删除路由。

| 操作 | 前提条件 | 描述 |
| :--- | | :--- | | :--- |
| 创建路由 | -- | 点击右上角“创建路由”按钮，在弹出的输入框中输入路由器名称、选择外部网络（默认为external）、设置带宽，最后点击“创建路由”按钮即可。 |
| 编辑路由 | -- | 点击路由右侧的编辑图标，可在弹出框中更改路由名称。 |
| 修改带宽 | -- | 点击路由右侧的“修改带宽”功能链接，可在弹出框中更改路由带宽。 |
| 删除路由 | 该路由上已经没有关联的子网、端口转发、vpn等 | 若某个路由没有关联任何资源，点击右侧的删除图标，在弹出框中点击“删除”即可。 |

在路由列表中，用户可通过输入路由名称、外部IP进行精确查询，也可按照网络分区和项目名称进行筛选。



