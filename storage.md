# 5. 云存储服务

金山云私有云集群将底层的存储细节结构化展示给用户，在用户控制台界面实现存储后端的灵活安装、配置、添加及管理。且相关配置不依赖于配置文件，能够实现水平扩展。 存储的安装过程充分自动化，不需要手动操作。

存储具体分为卷管理及存储管理两大块。卷管理位于“存储”模块，包括但不限于卷的`QOS`及`IOPS`的配置等，支持卷类型的创建，卷的创建、挂载、卸载、扩展以及共享盘的多挂载。

存储管理位于『管理』->『存储管理』模块，仅Admin和Seviceadmin有操作权限，主要包含存储介质的自发现、存储磁盘元信息的展示、存储的创建、扩容等，具体功能模块分为：探测集群磁盘，探测物理机磁盘，存储集群的创建、编辑、扩容、删除。

金山私有云整个云存储服务的原理结构图如下：
1. 从底层物理机集群探测出硬件磁盘列表。
2. 创建存储集群，并为之绑定物理磁盘（从1中探测出的磁盘列表中选择）
3. 基于存储集群创建卷类型，存储集群会根据卷类型提供卷服务。卷类型是用来设定卷的读写速率和吞吐量。
4. 创建卷的时候选择卷类型，接受存储集群提供的卷服务。

![](/assets/存储服务原理结构图.png)

## 5.1 卷管理

登录控制台，点击左侧导航条中的『存储』->『卷管理』就会看到当前项目下的卷管理列表。

卷包括两类，一类是在创建云主机时系统自建的系统卷：命名规则为`vm-`+`云主机	ID`+`bootvolume`，此类卷是无法删除的，只能直接删除云主机。另一类是用户自建卷，这类卷主要是以数据卷的方式挂载到云主机上，其中共享盘支持多挂载。

- 状态：表示卷状态，主要有两种『正在使用』即已挂载到云主机，『可用』表示未挂载到任何云主机。
- 连接状态：显示卷挂载到云主机的具体目录。

# 5.1.1 创建卷

1. 登录金山私有云平台，点击左侧导航条中的『存储』 -> 『卷管理』，在右侧卷管理页面，点击『创建卷』。
2. 在弹出的『创建卷』对话框中输入卷名称、卷数量、卷描述、选择数据来源，同时选择卷类型，最后卷大小。然后点击创建即可。



















